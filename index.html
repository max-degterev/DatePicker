<!DOCTYPE html>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="reset.css">
<link rel="stylesheet" type="text/css" href="datepicker.css">
<body>
    <div class="datepicker" id="datepicker" unselectable="on">
        <div class="dp-months-holder">
            <!-- JS generated months list -->
            <span class="dp-viewport"></span>
            <span class="dp-viewport-sel"></span>
        </div>
        <div class="dp-cal-crop">
            <div class="dp-cal-wrap">
                <div class="dp-cal-holder"><!-- JS generated calendar --></div>
                <div class="dp-cal-controls">
                    <span class="dp-cal-left-area dp-cal-cover">
                        <b class="dp-translucency"></b>
                        <i class="dp-cal-left-handle dp-cal-handle"></i>
                    </span>
                    <span class="dp-cal-middle-area"><span class="dp-cal-middle-area-textwrap"><i class="js_nights dp-cal-middle-area-text"></i></span></span>
                    <span class="dp-cal-right-area dp-cal-cover">
                        <b class="dp-translucency"></b>
                        <i class="dp-cal-right-handle dp-cal-handle"></i>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script src="jquery.js"></script>
    <script src="jquery.pubsub.min.js"></script>
    <script src="jquery.mousewheel.js"></script>
    <script src="calendar.js"></script>
    <script src="datepicker.js"></script>
    <script>
        var textNode = $('.dp-cal-middle-area-text');
        var datepicker = new DatePicker('#datepicker', {
            // lDate: '2012-10-17',
            // rDate: '2012-10-25'
        });

        var handleDatesMove = function() {
            var diff = datepicker.state.rHandle - datepicker.state.lHandle,
                text = diff > 1 ? diff + ' ночей' : '';
                
            textNode.html(text);
        };

        $.sub('datepicker_dates_moved', handleDatesMove);
        
        datepicker.init();
    </script>
</body>